<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>Overlay Mixer - nanocosmos Docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Overlay Mixer";
    var mkdocs_page_input_path = "nanostream/support/nanostream_mixer_overlay.md";
    var mkdocs_page_url = "/nanostream/support/nanostream_mixer_overlay/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> nanocosmos Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>nanostream</span></li>

        
            
    <ul class="subnav">
    <li><span>Web</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../web/nanostream-4.x-web-api/">API Manual</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../web/nanostream_javascript_integration/">Javascript Integration</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ios/nanostream-ios-sdk/">iOS api</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../macos/nanostream-macos-sdk/">MacOS api</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Android</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../android/android_developer_manual_streaming/">Streaming Developer Manual</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../android/android_developer_manual_playback/">Playback Developer Manual</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../android/android_developer_manual_sample/">Sample Developer Manual</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Windows api</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/windows_developer_manual/">Developer Manual</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/windows_binares/">Binary Modules</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/windows_license_help/">License Help</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/windows_networkwriter/">RTMP Network Render & Writer</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Language Integration</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/language_integration/nanostream_cpp_integration/">C++</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/language_integration/nanostream_csharp_integration/">C#</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/language_integration/nanostream_delphi_integration/">Delphi</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/language_integration/nanostream_activex_visualcpp/">VisualC</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../windows/language_integration/nanostream_activex_visualcpp_mfc/">MFC</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Direct Show</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_audio_volume/">Audio Volume</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>H.264</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_avc_h264/">AVC/H.264 Video Codec</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_nanoAVC_decoding_sdk/">nanoAVC/H.264 DirectShow Decoding</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_nanoAVC_encoding_sdk/">nanoAVC/H.264 DirectShow Encoding</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_h264_video_decoder/">H.264 Video Decoder Filter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_h264_video_encoder/">H.264 Video Encoder Filter</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>MPEG</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_mpeg2_broadcast_sdk/">MPEG2 Broadcast SDK</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_mpeg2_video_decoder/">MPEG2 Video Decoder</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_mpeg2_video_encoder/">MPEG2 Video Encoder</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_mpeg_audio_encoder/">MPEG Audio Encoder</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_quicktime_imx/">Quicktime IMX Playback</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>RTMP</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_rtmp_source/">RTMP Source</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_rtmp_writer/">RTMP Writer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_rtmp_status_statistics/">RTMP Status & Statistics</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>RTSP</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_rtsp_sink/">RTSP Sink</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_rtsp_source/">RTSP Source</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_udp_ts_streaming/">UDP/TS Streaming</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Video Filter</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_screen_capture_filter/">Screen Capture Filter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_video_mixer/">Video Mixer PiP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../directshow/directshow_overlay_mixing/">Video Mixer Overlay</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Additional Knowledge</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_aec/">Acoustic Echo Cancellation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_audio_levels/">Audio Level</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_bitrate_control_statistics/">Bitrate Control & Statistics</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_latency/">Latency</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_low_latency/">Low Latency</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Overlay Mixer</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#nanostream_live_video_encoder_mixer_overlay">nanoStream Live Video Encoder Mixer / Overlay</a></li>
                
                    <li><a class="toctree-l4" href="#requirements">Requirements:</a></li>
                
                    <li><a class="toctree-l4" href="#usage">Usage</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_mp4_recording/">MP4 Recording</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_remote_server_recording/">Remote Server Recording</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_udp_ts_streaming/">UDP/TS Streaming</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../nanostream_rtmp_all/">RTMP</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>bintu.live</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../bintu/android/bintu-android-sdk/">Android SDK</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>iOS</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../bintu/ios/bintu_ios_sdk/">SDK Documentation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../bintu/ios/bintu_ios_sample/">Sample Documentation</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../about/">About</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">nanocosmos Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>nanostream &raquo;</li>
        
      
        
          <li>Additional Knowledge &raquo;</li>
        
      
    
    <li>Overlay Mixer</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="nanostream_live_video_encoder_mixer_overlay">nanoStream Live Video Encoder Mixer / Overlay<a class="headerlink" href="#nanostream_live_video_encoder_mixer_overlay" title="Permanent link">&para;</a></h1>
<p>Live Video Encoder supports several enhancements to video source mixing and overlays. Video mixing of 2 input video signals Text and bitmap overlay Region based capture
All functions can be used from within nanoStream plugin applications or by using DirectShow filter setups.</p>
<h2 id="requirements">Requirements:<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<ul>
<li>Nanocosmos Live Video Encoder Web Plugins</li>
<li>Nanocosmos Video Mixer DirectShow Filter (for video mixing)</li>
<li>Nanocosmos Text/Bitmap Overlay Filter (for text or image overlay)</li>
<li>Video mixing and text/image overlay can be used independently.</li>
</ul>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<h3 id="usage_of_video_mixer">Usage of Video Mixer:<a class="headerlink" href="#usage_of_video_mixer" title="Permanent link">&para;</a></h3>
<p>Select 2 video sources:
- Unordered List ItemUsage for nanovid plugin: Set the <code>VideoSource</code> and <code>VideoSource2</code> properties
- Use for <code>nanoEncoder.js</code>: call <code>SetVideoSource</code> and <code>SetVideoSource2</code>
The parameters to the properties are the index numbers of the video capture device (0..n)
Select Video Mixing Mode: 0=off, 16+1=left/right, 16+2=left/right narrow, 16+7 … picture-in-picture</p>
<h3 id="usage_of_textbitmap_overlay">Usage of Text/Bitmap Overlay:<a class="headerlink" href="#usage_of_textbitmap_overlay" title="Permanent link">&para;</a></h3>
<p>An overlay can either be a text or an image. If the specified string contains an extension, like <em>.txt, .bmp, .jpg or .png</em> , the encoder tries to load the file from the given path. If no file extension is found the encoder assumes that the text in the string should be displayed directly.
Set the <code>TextOverlayText</code> Property to the text or file name
Set the <code>VideoEffect</code> Property: 0=off, 1=left top, 2=right top, 3=left bottom, 4=left top, 5=user defined position</p>
<h3 id="setting_the_overlay_position">Setting the overlay position<a class="headerlink" href="#setting_the_overlay_position" title="Permanent link">&para;</a></h3>
<p>Only possible when <code>VideoEffect</code> Property is set to 5.
1. via the Windows Registry (search for regedit in the Windows Start Menu):
Registry Key: HKCU\SOFTWARE\nanocosmos\nanoStream
<strong>Key</strong>: “OverlayLeft” <strong>Default Value</strong>: VideoWidth1/20
<strong>Key</strong>: “OverlayTop” <strong>Default Value</strong>: VideoHeight1/20
2. via <code>SetConfig()</code>:
<code>SetConfig(“OverlayOrigin”, “0,$left,$top”)</code>: left and top coordiantes can be specified; right and bottom coordinates are determined automatically, the first value is the index of the overlay (always 0, if only one overlay is used)
<code>SetConfig(“OverlayRect”, “0,$left,$top,$right,$bottom”)</code>: all coordinates are specified, the image or text is resized if necessary</p>
<h3 id="using_more_than_one_overlay">Using more than one Overlay<a class="headerlink" href="#using_more_than_one_overlay" title="Permanent link">&para;</a></h3>
<p>To use more than one overlay the <code>VideoEffect</code> property has to be set to 5 (free positioning)! To add a new overlay apply following steps:
1. <code>SetConfig(“AddOverlay”, text)</code>, where <code>text</code> can be a path to a file or simple text.
2. Get the index of the overlay: <code>nanovideo.GetIndexOfOverlay(text)</code>, <code>text</code> has to be same as in the previous step.
3. Use either <code>SetConfig(“OverlayOrigin”, “$index,$left,$top”)</code> or <code>SetConfig(“OverlayRect”, “$index,$left,$top,$right,$bottom”)</code></p>
<h3 id="overlay_options">Overlay Options<a class="headerlink" href="#overlay_options" title="Permanent link">&para;</a></h3>
<p>Options can be set with <code>SetConfig</code> and apply for all overlays used.
- <code>OverlayTextColor</code>: foreground color for text overlays
- <code>OverlayBackgroundColor</code>: background color
- <code>OverlaySkipColor</code>: color which should be not rendered, if the same as background color, no background is being drawn
- <code>OverlayAlpha</code>: the opaqueness of the overlay - from invisble (0.0) to fully opaque (1.0)</p>
<p>Colors are supplied as strings containing a COLORREF (RGB macro can be used), e.g. “0x00FF0000”.
Registry Keys:
<strong>Key</strong>: “OverlayBackColor” <strong>Default Value</strong>: 0
<strong>Key</strong>: “OverlayTextColor” <strong>Default Value</strong>: 0x000099FF</p>
<h3 id="usage_of_region_capture">Usage of Region Capture:<a class="headerlink" href="#usage_of_region_capture" title="Permanent link">&para;</a></h3>
<p>To capture a region of the input video, use the <code>CaptureRegion</code> configuration values or call the <code>SetCaptureRegion</code> Javascript Function.</p>
<pre><code class="javascript">nanovideo.SetConfig(&quot;CaptureRegion&quot;,&quot;left,right,top,bottom&quot;)
nanovideo.SetConfig(&quot;CaptureRegion&quot;,100,420,50,290)
</code></pre>

<p>During Encoding/Streaming, the CaptureRegion may be changed to follow a region object on the screen. For simpler usage of moving the origin of the region, the SetRegion method may be used:</p>
<pre><code class="javascript">SetRegion(left, top)
</code></pre>

<p>See example implementation in <strong>nanoStream.html</strong></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../nanostream_mp4_recording/" class="btn btn-neutral float-right" title="MP4 Recording">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../nanostream_low_latency/" class="btn btn-neutral" title="Low Latency"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../nanostream_low_latency/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../nanostream_mp4_recording/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../../js/theme.js"></script>

</body>
</html>
