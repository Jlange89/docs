<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>Overlay Mixer - nanocosmos Docs</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
        <link href="../../../extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">nanocosmos Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../../..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">nanostream <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Web</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../web/nanostream-4.x-web-api/">API Manual</a>
</li>

        
            
<li >
    <a href="../../web/nanostream_javascript_integration/">Javascript Integration</a>
</li>

        
    </ul>
  </li>

                    
                        
<li >
    <a href="../../ios/nanostream-ios-sdk/">iOS api</a>
</li>

                    
                        
<li >
    <a href="../../macos/nanostream-macos-sdk/">MacOS api</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Android</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../android/android_developer_manual_streaming/">Streaming Developer Manual</a>
</li>

        
            
<li >
    <a href="../../android/android_developer_manual_playback/">Playback Developer Manual</a>
</li>

        
            
<li >
    <a href="../../android/android_developer_manual_sample/">Sample Developer Manual</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Windows api</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../windows/windows_developer_manual/">Developer Manual</a>
</li>

        
            
<li >
    <a href="../../windows/windows_binares/">Binary Modules</a>
</li>

        
            
<li >
    <a href="../../windows/windows_license_help/">License Help</a>
</li>

        
            
<li >
    <a href="../../windows/windows_networkwriter/">RTMP Network Render & Writer</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Language Integration</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../windows/language_integration/nanostream_cpp_integration/">C++</a>
</li>

        
            
<li >
    <a href="../../windows/language_integration/nanostream_csharp_integration/">C#</a>
</li>

        
            
<li >
    <a href="../../windows/language_integration/nanostream_delphi_integration/">Delphi</a>
</li>

        
            
<li >
    <a href="../../windows/language_integration/nanostream_activex_visualcpp/">VisualC</a>
</li>

        
            
<li >
    <a href="../../windows/language_integration/nanostream_activex_visualcpp_mfc/">MFC</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Direct Show</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../directshow/directshow_audio_volume/">Audio Volume</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">H.264</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../directshow/directshow_avc_h264/">AVC/H.264 Video Codec</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_nanoAVC_decoding_sdk/">nanoAVC/H.264 DirectShow Decoding</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_nanoAVC_encoding_sdk/">nanoAVC/H.264 DirectShow Encoding</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_h264_video_decoder/">H.264 Video Decoder Filter</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_h264_video_encoder/">H.264 Video Encoder Filter</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">MPEG</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../directshow/directshow_mpeg2_broadcast_sdk/">MPEG2 Broadcast SDK</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_mpeg2_video_decoder/">MPEG2 Video Decoder</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_mpeg2_video_encoder/">MPEG2 Video Encoder</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_mpeg_audio_encoder/">MPEG Audio Encoder</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../../directshow/directshow_quicktime_imx/">Quicktime IMX Playback</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">RTMP</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../directshow/directshow_rtmp_source/">RTMP Source</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_rtmp_writer/">RTMP Writer</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_rtmp_status_statistics/">RTMP Status & Statistics</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">RTSP</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../directshow/directshow_rtsp_sink/">RTSP Sink</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_rtsp_source/">RTSP Source</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../../directshow/directshow_udp_ts_streaming/">UDP/TS Streaming</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Video Filter</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../directshow/directshow_screen_capture_filter/">Screen Capture Filter</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_video_mixer/">Video Mixer PiP</a>
</li>

        
            
<li >
    <a href="../../directshow/directshow_overlay_mixing/">Video Mixer Overlay</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Additional Knowledge</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../nanostream_aec/">Acoustic Echo Cancellation</a>
</li>

        
            
<li >
    <a href="../nanostream_audio_levels/">Audio Level</a>
</li>

        
            
<li >
    <a href="../nanostream_bitrate_control_statistics/">Bitrate Control & Statistics</a>
</li>

        
            
<li >
    <a href="../nanostream_latency/">Latency</a>
</li>

        
            
<li >
    <a href="../nanostream_low_latency/">Low Latency</a>
</li>

        
            
<li class="active">
    <a href="./">Overlay Mixer</a>
</li>

        
            
<li >
    <a href="../nanostream_mp4_recording/">MP4 Recording</a>
</li>

        
            
<li >
    <a href="../nanostream_remote_server_recording/">Remote Server Recording</a>
</li>

        
            
<li >
    <a href="../nanostream_udp_ts_streaming/">UDP/TS Streaming</a>
</li>

        
            
<li >
    <a href="../nanostream_rtmp_all/">RTMP</a>
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">bintu.live <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../../../bintu/android/bintu-android-sdk/">Android SDK</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">iOS</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../bintu/ios/bintu_ios_sdk/">SDK Documentation</a>
</li>

        
            
<li >
    <a href="../../../bintu/ios/bintu_ios_sample/">Sample Documentation</a>
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../../../about/">About</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../nanostream_low_latency/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../nanostream_mp4_recording/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#nanostream_live_video_encoder_mixer_overlay">nanoStream Live Video Encoder Mixer / Overlay</a></li>
        
            <li><a href="#requirements">Requirements:</a></li>
        
            <li><a href="#usage">Usage</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="nanostream_live_video_encoder_mixer_overlay">nanoStream Live Video Encoder Mixer / Overlay<a class="headerlink" href="#nanostream_live_video_encoder_mixer_overlay" title="Permanent link">&para;</a></h1>
<p>Live Video Encoder supports several enhancements to video source mixing and overlays. Video mixing of 2 input video signals Text and bitmap overlay Region based capture
All functions can be used from within nanoStream plugin applications or by using DirectShow filter setups.</p>
<h2 id="requirements">Requirements:<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<ul>
<li>Nanocosmos Live Video Encoder Web Plugins</li>
<li>Nanocosmos Video Mixer DirectShow Filter (for video mixing)</li>
<li>Nanocosmos Text/Bitmap Overlay Filter (for text or image overlay)</li>
<li>Video mixing and text/image overlay can be used independently.</li>
</ul>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<h3 id="usage_of_video_mixer">Usage of Video Mixer:<a class="headerlink" href="#usage_of_video_mixer" title="Permanent link">&para;</a></h3>
<p>Select 2 video sources:
- Unordered List ItemUsage for nanovid plugin: Set the <code>VideoSource</code> and <code>VideoSource2</code> properties
- Use for <code>nanoEncoder.js</code>: call <code>SetVideoSource</code> and <code>SetVideoSource2</code>
The parameters to the properties are the index numbers of the video capture device (0..n)
Select Video Mixing Mode: 0=off, 16+1=left/right, 16+2=left/right narrow, 16+7 … picture-in-picture</p>
<h3 id="usage_of_textbitmap_overlay">Usage of Text/Bitmap Overlay:<a class="headerlink" href="#usage_of_textbitmap_overlay" title="Permanent link">&para;</a></h3>
<p>An overlay can either be a text or an image. If the specified string contains an extension, like <em>.txt, .bmp, .jpg or .png</em> , the encoder tries to load the file from the given path. If no file extension is found the encoder assumes that the text in the string should be displayed directly.
Set the <code>TextOverlayText</code> Property to the text or file name
Set the <code>VideoEffect</code> Property: 0=off, 1=left top, 2=right top, 3=left bottom, 4=left top, 5=user defined position</p>
<h3 id="setting_the_overlay_position">Setting the overlay position<a class="headerlink" href="#setting_the_overlay_position" title="Permanent link">&para;</a></h3>
<p>Only possible when <code>VideoEffect</code> Property is set to 5.
1. via the Windows Registry (search for regedit in the Windows Start Menu):
Registry Key: HKCU\SOFTWARE\nanocosmos\nanoStream
<strong>Key</strong>: “OverlayLeft” <strong>Default Value</strong>: VideoWidth1/20
<strong>Key</strong>: “OverlayTop” <strong>Default Value</strong>: VideoHeight1/20
2. via <code>SetConfig()</code>:
<code>SetConfig(“OverlayOrigin”, “0,$left,$top”)</code>: left and top coordiantes can be specified; right and bottom coordinates are determined automatically, the first value is the index of the overlay (always 0, if only one overlay is used)
<code>SetConfig(“OverlayRect”, “0,$left,$top,$right,$bottom”)</code>: all coordinates are specified, the image or text is resized if necessary</p>
<h3 id="using_more_than_one_overlay">Using more than one Overlay<a class="headerlink" href="#using_more_than_one_overlay" title="Permanent link">&para;</a></h3>
<p>To use more than one overlay the <code>VideoEffect</code> property has to be set to 5 (free positioning)! To add a new overlay apply following steps:
1. <code>SetConfig(“AddOverlay”, text)</code>, where <code>text</code> can be a path to a file or simple text.
2. Get the index of the overlay: <code>nanovideo.GetIndexOfOverlay(text)</code>, <code>text</code> has to be same as in the previous step.
3. Use either <code>SetConfig(“OverlayOrigin”, “$index,$left,$top”)</code> or <code>SetConfig(“OverlayRect”, “$index,$left,$top,$right,$bottom”)</code></p>
<h3 id="overlay_options">Overlay Options<a class="headerlink" href="#overlay_options" title="Permanent link">&para;</a></h3>
<p>Options can be set with <code>SetConfig</code> and apply for all overlays used.
- <code>OverlayTextColor</code>: foreground color for text overlays
- <code>OverlayBackgroundColor</code>: background color
- <code>OverlaySkipColor</code>: color which should be not rendered, if the same as background color, no background is being drawn
- <code>OverlayAlpha</code>: the opaqueness of the overlay - from invisble (0.0) to fully opaque (1.0)</p>
<p>Colors are supplied as strings containing a COLORREF (RGB macro can be used), e.g. “0x00FF0000”.
Registry Keys:
<strong>Key</strong>: “OverlayBackColor” <strong>Default Value</strong>: 0
<strong>Key</strong>: “OverlayTextColor” <strong>Default Value</strong>: 0x000099FF</p>
<h3 id="usage_of_region_capture">Usage of Region Capture:<a class="headerlink" href="#usage_of_region_capture" title="Permanent link">&para;</a></h3>
<p>To capture a region of the input video, use the <code>CaptureRegion</code> configuration values or call the <code>SetCaptureRegion</code> Javascript Function.</p>
<pre><code class="javascript">nanovideo.SetConfig(&quot;CaptureRegion&quot;,&quot;left,right,top,bottom&quot;)
nanovideo.SetConfig(&quot;CaptureRegion&quot;,100,420,50,290)
</code></pre>

<p>During Encoding/Streaming, the CaptureRegion may be changed to follow a region object on the screen. For simpler usage of moving the origin of the region, the SetRegion method may be used:</p>
<pre><code class="javascript">SetRegion(left, top)
</code></pre>

<p>See example implementation in <strong>nanoStream.html</strong></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
        <script src="../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>